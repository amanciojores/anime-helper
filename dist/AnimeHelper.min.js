class AnimeHelper{_anime;_animateFn;_timelineFn;_scopeFn;_resolveTargetsFn;_textSplitFn;_scrollFn;_animatable;static _instances=new Map;static _syncQueue=[];static applySyncs(){this._syncQueue.forEach(({slave:e,masterSelector:t,offset:a})=>{var s=this._instances.get(t);s&&"function"==typeof s.sync?s.sync(e,a):console.warn(`AnimeHelper: Could not find a master timeline with target "${t}" to sync with.`)}),this._syncQueue=[]}static _presets={fadeIn:e=>{var t={opacity:[0,1]};switch(e.from||"bottom"){case"top":t.translateY=[-20,0];break;case"left":t.translateX=[-20,0];break;case"right":t.translateX=[20,0];break;default:t.translateY=[20,0]}return t}};static addPreset(e,t){"string"!=typeof e||"function"!=typeof t?console.error("AnimeHelper.addPreset() requires a string name and a generator function."):this._presets[e]=t}static get(e){return this._instances.get(e)}static getAll(){return this._instances}static kill(e){this.#assignMethodToAnimation(this.get(e),"revert")}static killAll(){this.#assignMethodToAnimation(this.getAll(),"revert")}static play(e){this.#assignMethodToAnimation(this.get(e),"play")}static playAll(){this.#assignMethodToAnimation(this.getAll(),"play")}static pause(e){this.#assignMethodToAnimation(this.get(e),"pause")}static pauseAll(){this.#assignMethodToAnimation(this.getAll(),"pause")}static resume(e){this.#assignMethodToAnimation(this.get(e),"resume")}static resumeAll(){this.#assignMethodToAnimation(this.getAll(),"resume")}static restart(e){this.#assignMethodToAnimation(this.get(e),"restart")}static restartAll(){this.#assignMethodToAnimation(this.getAll(),"restart")}static#assignMethodToAnimation(e,t){e&&(e instanceof Map?e.forEach(e=>{e&&"function"==typeof e[t]&&e[t]()}):e&&"function"==typeof e[t]&&e[t]())}_delayToStagger(e){return this._anime.stagger(e)}_getPreset(e,t){if(e){e=this.constructor._presets[e];if(e)return e(t)}return{}}_parseCssValue(e){var t;return"string"==typeof e&&(e=e.match(/^(\-?[\d\.]+)([a-z%]*)$/i))?([,e,t]=e,{value:parseFloat(e),unit:t||""}):null}_createPin(e,t){let{duration:a="auto",start:s="0px",target:r}=t;t=this._resolveTargetsFn(e)[0];if(t){var i=r?this._resolveScopedTargets(r,t):[t];if(i&&0!==i.length){if(i.forEach(e=>{e.style.position="sticky",e.style.top=s}),"auto"!==a)if(["-=","+="].some(e=>a.includes(e))){var i=t.offsetHeight,n=this._parseCssValue(a.substring(2)).value;let e=i;a.includes("+=")?e=i+n:a.includes("-=")&&(e=i-n),t.style.height=e+"px"}else t.style.height=a}else console.warn(`AnimeHelper Pin: Could not find the pin target "${r}" inside "${e}".`)}else console.warn(`AnimeHelper Pin: Could not find the track element "${e}".`)}_resolveScopedTargets(e,t){return t?this._resolveTargetsFn(e).filter(e=>t.contains(e)):this._resolveTargetsFn(e)}constructor(e){e=e||("undefined"!=typeof window?window.anime:void 0);if(!e)throw new Error("Anime.js not found.");this._anime=e,this._animateFn=e.animate||e,this._timelineFn=e.createTimeline||e.timeline,this._scopeFn=e.createScope||e.scope,this._resolveTargetsFn=e.utils?.$||e.$,this._textSplitFn=e.text?.split||e.splitText,this._scrollFn=e.scroll||e.onScroll,this._animatable=e.animatable||e.createAnimatable}_createScrollObserver(e,t){if(this._scrollFn&&t.scrollParams){var{scrollParams:t,scrollContainer:a}=t,e=this._resolveTargetsFn(e)[0];if(e)return e={target:e,container:a,...t},this._scrollFn(e);console.warn("AnimeHelper: Could not find a target for the scroll observer.")}}observe(s,r){if(r){let e,t=s,a=s;if(r.pin&&(i=r.pinParams||{},a=s,t=i.target||s,this._createPin(s,i),r.type="scroll",r.scrollParams={target:a,enter:"start start",leave:"end end",...r.scrollParams}),"scroll"===r.type){var i=r.animationTarget||r.pinParams?.target||r.pinParams?.targets||s;e=this._createScrollAnimation(i,r.animationTarget?s:i,r)}else{var i=this._createScrollObserver(a,r),n={...r.params||{}},l=(i?n.autoplay=i:r.reusable&&(n.autoplay=!1,delete r.reusable),{...r,params:n});switch(l.type){case"animatable":e=this._createAnimatable(t,r.params);break;case"splitText":e=this._createTextSplitAnimation(t,l);break;case"scope":e=this._createScopedAnimation(t,l);break;case"timeline":e=this._buildTimeline(t,l);break;default:e=this._createSingleAnimation(t,l)}}return"string"==typeof s&&e&&this.constructor._instances.set(s,e),r.syncWith&&this.constructor._syncQueue.push({slave:e,masterSelector:r.syncWith,offset:r.offset}),e}console.warn("AnimeHelper.observe() expects a configuration object.")}_createAnimatable(e,t){return this._animatable(e,t)}_createScrollAnimation(e,t,a){var{params:s={},scrollParams:r={},scrollContainer:i,preset:n}=a;if(this._scrollFn){t=this._resolveTargetsFn(t)[0];if(t)return i={target:t,container:i,...r,sync:!0},r=a.animationTarget?this._resolveScopedTargets(e,t):this._resolveTargetsFn(e),this._animateFn(r,{...s,...this._getPreset(n,a),autoplay:this._scrollFn(i)});console.warn("AnimeHelper: Could not find a target for the scroll animation.")}else console.error("AnimeHelper: Scroll module (anime.onScroll || anime.scroll) not found.")}_createTextSplitAnimation(e,t){var a,s,r,i,n,l;if(this._textSplitFn)return{splitBy:t="words",splitParams:r={},params:a={},timelineParams:s={}}=t,Array.isArray(t)?this._createMultiSplitTimeline(e,{splitBy:t,splitParams:r,timelineParams:s}):({from:s="bottom",stagger:r=50,distance:l="1em",debug:n=!1,splitOptions:i={}}=r,(e=this._textSplitFn(e,{[t]:i,debug:n})[t])&&0!==e.length?(n={opacity:[0,1],...(i={top:{translateY:[-l,0]},bottom:{translateY:[l,0]},left:{translateX:[-l,0]},right:{translateX:[l,0]}})[s]||i.bottom},l={delay:this._delayToStagger(r),...n,...a},this._animateFn(e,l)):void console.warn(`AnimeHelper: Could not find any "${t}" to animate.`));console.error("AnimeHelper: TextSplitter module (anime.text.split) not found.")}_createMultiSplitTimeline(e,{splitBy:s,splitParams:t,timelineParams:r}){let{debug:i=!1,splitOptions:n={}}=t;if(r&&Array.isArray(r.steps)&&r.steps.length===s.length){if(Array.isArray(n)&&0!==n.length){t=s.reduce((e,t,a)=>(e[t]=n[a],e),{});let a=this._textSplitFn(e,{...t,debug:i});return r.steps.forEach((e,t)=>{e.target=a[s[t]],e.params&&e.params.stagger&&(e.params.delay=this._delayToStagger(e.params.stagger)),e.stagger&&(e.offset=this._delayToStagger(e.stagger),delete e.stagger)}),this._buildTimeline(null,r)}console.error("AnimeHelper: When 'splitBy' is an array, 'splitOptions' must also be an array of the same length or contain at least one element.")}else console.error("AnimeHelper: When 'splitBy' is an array, 'timelineParams.steps' must also be an array of the same length.")}_createScopedAnimation(e,t){var a={...t.scopeParams};a.root=e;let s=this._scopeFn(a);return"function"!=typeof t.run?console.warn('AnimeHelper: type "scope" requires a "run" function.'):s.add(()=>{let e={matches:s.matches,utils:this._anime.utils,methods:{register:(e,t)=>s.add(e,t)}};if(t.run(e),"function"==typeof t.onRevert)return()=>t.onRevert(e)}),s}_createSingleAnimation(e,t,a=!0){let s={...t.params};var r;return t.preset&&(r=this.constructor._presets[t.preset])&&(s={...r(t),...s}),a?this._animateFn(e,s):s}_buildTimeline(e,t){var a={...t.params};let s=this._timelineFn(a),r=this._resolveTargetsFn(e)[0];return r||null===e||console.warn("AnimeHelper: Could not find a valid parent element for the timeline."),Array.isArray(t.offsetLabel)&&t.offsetLabel.forEach(e=>{e.label&&s.label(e.label,e.offset)}),Array.isArray(t.steps)&&t.steps.forEach(e=>{var t,a;e.instance?s.sync(e.instance,e.offset):0<(t=Array.isArray(e.target)?e.target:r?this._resolveScopedTargets(e.target,r):this._resolveTargetsFn(e.target)).length?(e.params?.stagger&&(e.params.delay=this._delayToStagger(e.params.stagger),delete e.params.stagger),e.stagger&&(e.offset=this._delayToStagger(e.stagger),delete e.stagger),a=this._createSingleAnimation(t,e,!1),s.add(t,a,e.offset)):r&&console.warn(`AnimeHelper: Timeline step target "${e.target}" not found within parent.`)}),Array.isArray(t.call)&&t.call.forEach(e=>{"function"==typeof e.func&&s.call(()=>e.func(s),e.at)}),a.init||t.init?s.init():s}get anime(){return this._anime}}export default AnimeHelper;"undefined"!=typeof window&&(window.AnimeHelper=AnimeHelper);